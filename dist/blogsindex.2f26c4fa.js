webpackJsonp([6],{3:function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.skip=t.fieldValidationsModal=t.fieldValidationsPhotoGallery=t.fieldValidations=t.run=t.ruleRunner=t.minLength=t.mustMatch=t.conditionalRequired=t.required=t.cardWidth=t.cropSquare=t.resize=t.sanitizeExcerpt=t.sanitize=t.generateSlug=t.formatDate=t.galleriesDbRef=t.timeRef=t.galleriesRef=t.contattiRef=t.blogsRef=t.rootRef=void 0;var l=n(10),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l),o=n(39),i=function(e){return e&&e.__esModule?e:{default:e}}(o),u={apiKey:"AIzaSyDorzqQG5pgETcGGmQ58DrQhQUHYnVERHU",authDomain:"avis-website-dac6e.firebaseapp.com",databaseURL:"https://avis-website-dac6e.firebaseio.com",projectId:"avis-website-dac6e",storageBucket:"avis-website-dac6e.appspot.com",messagingSenderId:"115042660818"};r.initializeApp(u);var c=t.rootRef=r.database().ref().child("avis"),d=(t.blogsRef=c.child("blogs"),t.contattiRef=c.child("contatti"),t.galleriesRef=c.child("galleries"),t.timeRef=r.database.ServerValue.TIMESTAMP,t.galleriesDbRef=r.storage().ref().child("images/galleries"),t.formatDate=function(e){var t=["genn","febbr","mar","apr","magg","giugno","luglio","ag","sett","ott","nov","dic"];return e.getDate()+" "+t[e.getMonth()]+" "+e.getFullYear()},t.generateSlug=function(e){return e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},t.sanitize=function(e){return{__html:(0,i.default)(e,{allowedTags:i.default.defaults.allowedTags.concat(["img","span"]),allowedAttributes:{a:["href","name","target"],img:["alt","src"],"*":["style","align"]}})}},t.sanitizeExcerpt=function(e){return{__html:(0,i.default)(e,{allowedTags:["b","i","em","strong","a"],allowedAttributes:{a:["href"]}})}},t.resize=function(e,t){return"http://res.cloudinary.com/avis-rovigo/image/fetch/w_"+e+",c_scale/"+encodeURIComponent(t).replace(/'/g,"%27").replace(/"/g,"%22")},t.cropSquare=function(e,t){return"http://res.cloudinary.com/avis-rovigo/image/fetch/w_"+e+",h_"+e+",c_fill/"+encodeURIComponent(t).replace(/'/g,"%27").replace(/"/g,"%22")},t.cardWidth=function(){return window.innerWidth>600?Math.floor(window.innerWidth/3):window.innerWidth<600&&window.innerWidth>480?Math.floor(window.innerWidth/2):Math.floor(window.innerWidth)},function(e){return e+" is required"}),s=function(e){return function(t){return t+" must match "+e}},f=function(e){return function(t){return t+" must be at least "+e+" characters"}},m=t.required=function(e){return e?null:d},g=(t.conditionalRequired=function(e,t){return function(e,n){return""!==n[t]&&""===e?d:null}},t.mustMatch=function(e,t){return function(n,a){return a[e]===n?null:s(t)}},t.minLength=function(e){return function(t){return t.length>=e?null:f(e)}},t.ruleRunner=function(e,t){for(var n=arguments.length,l=Array(n>2?n-2:0),r=2;r<n;r++)l[r-2]=arguments[r];return function(n){var r=l.find(function(t){return t(n[e],n)});return r?a({},e,r(n[e],n)(t)):{}}});t.run=function(e,t){return t.reduce(function(t,n){return Object.assign(t,n(e))},{})},t.fieldValidations=[g("title","Title",m)],t.fieldValidationsPhotoGallery=[g("title","Gallery Name",m)],t.fieldValidationsModal=[g("alt","Alt text",m)],t.skip=function(e){var t=function(e){e.target.removeAttribute("tabindex")},n=document.getElementById(e);n.tabIndex=-1,n.focus(),n.addEventListener("blur",t)}},40:function(e,t){},41:function(e,t){},87:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function l(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),c=n(0),d=a(c),s=n(6),f=n(24),m=a(f),g=n(45),b=a(g),p=n(44),_=a(p);n(46);var h=n(3),v=n(9),y=a(v),E=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={blogs:[],msg:!1,currentKey:"",modalOpen:!1,filterQuery:""},e.openModal=e.openModal.bind(e),e.closeModal=e.closeModal.bind(e),e}return i(t,e),u(t,[{key:"componentDidMount",value:function(){var e=this;h.blogsRef.on("value",function(t){var n=[];t.forEach(function(e){var t=e.val();t[".key"]=e.key,n.push(t)}),e.setState(function(){return{blogs:n}})})}},{key:"componentWillUnmount",value:function(){h.blogsRef.off()}},{key:"onDelete",value:function(e){var t=this;h.blogsRef.child(e).remove().then(function(){t.setState({msg:!0,modalOpen:!1}),setTimeout(function(){t.componentRef&&t.setState({msg:!1,deleteKey:null})},2e3)})}},{key:"closeModal",value:function(){this.setState(function(){return{modalOpen:!1}})}},{key:"openModal",value:function(e){this.setState(function(){return{modalOpen:!0,deleteKey:e}})}},{key:"render",value:function(){var e=this,t=[].concat(l(this.state.blogs)).reverse(),n=[{Header:function(){return d.default.createElement("div",{className:"blogInd__tableHead"},"Title")},accessor:"title",minWidth:150,Cell:function(e){return d.default.createElement("div",{className:"blogInd__cell"},d.default.createElement(s.Link,{className:"blogInd__title",to:"/blog/"+e.original.slug},e.original.title)," ")},Filter:function(e){var t=e.filter,n=e.onChange;return d.default.createElement("input",{type:"text",placeholder:"Search posts",onChange:function(e){return n(e.target.value)},style:{width:"100%"},value:t?t.value:""})},filterMethod:function(e,t){return(0,_.default)(t,e.value,{keys:["title"]})},filterAll:!0},{Header:function(){return d.default.createElement("div",{className:"blogInd__tableHead"},"Tags")},accessor:"tags",minWidth:40,Cell:function(e){return d.default.createElement("div",{className:"blogInd__cell"},e.original.tags?e.original.tags.map(function(t){return d.default.createElement("span",{className:"blogInd__tag",key:t+"-"+e.original.key},t)}):""," ")},filterMethod:function(e,t){return"homepage"===e.value?t[e.id].indexOf("Homepage")>-1:"faq"!==e.value||t[e.id].indexOf("FAQ")>-1},Filter:function(e){var t=e.filter,n=e.onChange;return d.default.createElement("select",{className:"blogInd__select",onChange:function(e){return n(e.target.value)},style:{width:"100%"},value:t?t.value:"all"},d.default.createElement("option",{value:"all"},"Show All"),d.default.createElement("option",{value:"homepage"},"Homepage"),d.default.createElement("option",{value:"faq"},"FAQ"))}},{Header:function(){return d.default.createElement("div",{className:"blogInd__tableHead"},"Image")},accessor:"image",minWidth:30,filterable:!1,Cell:function(e){return d.default.createElement("div",{className:"blogInd__cell center"},e.original.images&&e.original.images.featured&&d.default.createElement("img",{className:"blogInd__thumb",src:(0,h.resize)(50,e.original.images.featured.url),alt:e.original.images.featured.alt}))}},{Header:function(){return d.default.createElement("div",{className:"blogInd__tableHead"},"Date")},accessor:"date",minWidth:60,filterable:!1,defaultSortDesc:!0,Cell:function(e){return d.default.createElement("div",{className:"blogInd__cell center"}," ",(0,h.formatDate)(new Date(e.original.timestamp)))}},{Header:function(){return d.default.createElement("div",{className:"blogInd__tableHead"},"Edit")},accessor:"edit",minWidth:30,filterable:!1,Cell:function(e){return d.default.createElement("div",{className:"blogInd__cell center"},d.default.createElement(s.Link,{to:"/edit/"+e.original.key,className:""},d.default.createElement("i",{className:"fa fa-pencil blogInd__icon blogInd__icon--edit"}))," ")}},{Header:function(){return d.default.createElement("div",{className:"blogInd__tableHead"},"Delete")},accessor:"delete",minWidth:30,filterable:!1,Cell:function(t){return d.default.createElement("div",{className:"blogInd__cell center"}," ",d.default.createElement("button",{className:"fa fa-trash blogInd__icon blogInd__icon--delete",onClick:function(){return e.openModal(t.original[".key"])}}))}}];return d.default.createElement("div",{className:"blogInd__container",id:"blogInd"},d.default.createElement(m.default,{isOpen:this.state.modalOpen,onAfterOpen:this.afterOpenModal,onRequestClose:this.closeModal,className:"modal",contentLabel:"Confirm Delete"},d.default.createElement("div",{className:"modal__dialog"},d.default.createElement("div",{className:"modal__content"},d.default.createElement("div",{className:"modal__header"},d.default.createElement("button",{type:"button",onClick:this.closeModal,className:"modal__close--x","data-dismiss":"modal","aria-label":"Close"},d.default.createElement("span",{"aria-hidden":"true"},"Ã—")),d.default.createElement("h2",{className:"modal__title",id:"modalTitle"},"Confirm Delete")),d.default.createElement("div",{className:"modal__body"},d.default.createElement("p",null,"Are you sure you want to delete this post? This cannot be undone.")),d.default.createElement("div",{className:"modal__footer"},d.default.createElement("button",{type:"button",onClick:this.closeModal,className:"modal__button modal__close--btn","data-dismiss":"modal"},"Cancel"),d.default.createElement("button",{type:"button",onClick:function(){return e.onDelete(e.state.deleteKey)},className:"modal__button modal__confirm modal__confirm--danger","data-dismiss":"modal"},"Delete"))))),this.state.msg&&d.default.createElement("div",{className:"blogInd__msg"},"Post successfully deleted."),t.length?d.default.createElement("div",{ref:function(t){e.componentRef=t},className:"blogInd__table-cont"},d.default.createElement(b.default,{className:"blogInd__grid -striped",data:t,columns:n,defaultPageSize:5,filterable:!0,defaultFilterMethod:function(e,t){return t[e.id].includes(e.value)}})):d.default.createElement(y.default,null))}}]),t}(c.Component);t.default=E},9:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(a),r=function(e){return l.default.createElement("div",{className:"spinner "+e.cssClass},l.default.createElement("i",{className:"fa fa-spinner fa-pulse fa-3x fa-fw"}),l.default.createElement("span",{className:"sr-only"},"Loading..."))};t.default=r}},[87]);