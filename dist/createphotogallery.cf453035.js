webpackJsonp([3],{129:function(t,e,n){!function(e,i){t.exports=i(n(0),n(2))}(0,function(t,e){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){(function(i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}function s(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function c(t,e){return"application/x-moz-file"===t.type||(0,v.default)(t,e)}Object.defineProperty(e,"__esModule",{value:!0});var h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},p=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),f=n(2),d=r(f),m=n(3),g=r(m),y=n(4),v=r(y),b=n(5),w=r(b),E="undefined"==typeof document||!document||!document.createElement||"multiple"in document.createElement("input"),x=function(t){function e(t,n){a(this,e);var i=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return i.renderChildren=function(t,e,n){return"function"==typeof t?t(h({},i.state,{isDragActive:e,isDragReject:n})):t},i.onClick=i.onClick.bind(i),i.onDocumentDrop=i.onDocumentDrop.bind(i),i.onDragStart=i.onDragStart.bind(i),i.onDragEnter=i.onDragEnter.bind(i),i.onDragLeave=i.onDragLeave.bind(i),i.onDragOver=i.onDragOver.bind(i),i.onDrop=i.onDrop.bind(i),i.onFileDialogCancel=i.onFileDialogCancel.bind(i),i.setRef=i.setRef.bind(i),i.setRefs=i.setRefs.bind(i),i.onInputElementClick=i.onInputElementClick.bind(i),i.isFileDialogActive=!1,i.state={draggedFiles:[],acceptedFiles:[],rejectedFiles:[]},i}return l(e,t),p(e,null,[{key:"onDocumentDragOver",value:function(t){t.preventDefault()}}]),p(e,[{key:"componentDidMount",value:function(){var t=this.props.preventDropOnDocument;this.dragTargets=[],t&&(document.addEventListener("dragover",e.onDocumentDragOver,!1),document.addEventListener("drop",this.onDocumentDrop,!1)),this.fileInputEl.addEventListener("click",this.onInputElementClick,!1),document.body.onfocus=this.onFileDialogCancel}},{key:"componentWillUnmount",value:function(){this.props.preventDropOnDocument&&(document.removeEventListener("dragover",e.onDocumentDragOver),document.removeEventListener("drop",this.onDocumentDrop)),this.fileInputEl.removeEventListener("click",this.onInputElementClick,!1),document.body.onfocus=null}},{key:"onDocumentDrop",value:function(t){this.node.contains(t.target)||(t.preventDefault(),this.dragTargets=[])}},{key:"onDragStart",value:function(t){this.props.onDragStart&&this.props.onDragStart.call(this,t)}},{key:"onDragEnter",value:function(t){t.preventDefault(),-1===this.dragTargets.indexOf(t.target)&&this.dragTargets.push(t.target),this.setState({draggedFiles:(0,w.default)(t)}),this.props.onDragEnter&&this.props.onDragEnter.call(this,t)}},{key:"onDragOver",value:function(t){t.preventDefault(),t.stopPropagation();try{t.dataTransfer.dropEffect="copy"}catch(t){}return this.props.onDragOver&&this.props.onDragOver.call(this,t),!1}},{key:"onDragLeave",value:function(t){var e=this;t.preventDefault(),this.dragTargets=this.dragTargets.filter(function(n){return n!==t.target&&e.node.contains(n)}),this.dragTargets.length>0||(this.setState({draggedFiles:[]}),this.props.onDragLeave&&this.props.onDragLeave.call(this,t))}},{key:"onDrop",value:function(t){var e=this,n=this.props,r=n.onDrop,o=n.onDropAccepted,a=n.onDropRejected,u=n.multiple,l=n.disablePreview,h=n.accept,p=(0,w.default)(t),f=[],d=[];t.preventDefault(),this.dragTargets=[],this.isFileDialogActive=!1,p.forEach(function(t){if(!l)try{t.preview=window.URL.createObjectURL(t)}catch(e){"production"!==i.env.NODE_ENV&&console.error("Failed to generate preview for file",t,e)}c(t,h)&&e.fileMatchSize(t)?f.push(t):d.push(t)}),u||d.push.apply(d,s(f.splice(1))),r&&r.call(this,f,d,t),d.length>0&&a&&a.call(this,d,t),f.length>0&&o&&o.call(this,f,t),this.draggedFiles=null,this.setState({draggedFiles:[],acceptedFiles:f,rejectedFiles:d})}},{key:"onClick",value:function(t){var e=this.props,n=e.onClick;e.disableClick||(t.stopPropagation(),n&&n.call(this,t),setTimeout(this.open.bind(this),0))}},{key:"onInputElementClick",value:function(t){t.stopPropagation(),this.props.inputProps&&this.props.inputProps.onClick&&this.props.inputProps.onClick()}},{key:"onFileDialogCancel",value:function(){var t=this.props.onFileDialogCancel,e=this.fileInputEl,n=this.isFileDialogActive;t&&n&&setTimeout(function(){e.files.length||(n=!1,t())},300)}},{key:"setRef",value:function(t){this.node=t}},{key:"setRefs",value:function(t){this.fileInputEl=t}},{key:"fileMatchSize",value:function(t){return t.size<=this.props.maxSize&&t.size>=this.props.minSize}},{key:"allFilesAccepted",value:function(t){var e=this;return t.every(function(t){return c(t,e.props.accept)})}},{key:"open",value:function(){this.isFileDialogActive=!0,this.fileInputEl.value=null,this.fileInputEl.click()}},{key:"render",value:function(){var t=this.props,e=t.accept,n=t.activeClassName,i=t.inputProps,r=t.multiple,s=t.name,a=t.rejectClassName,u=t.children,l=o(t,["accept","activeClassName","inputProps","multiple","name","rejectClassName","children"]),c=l.activeStyle,p=l.className,f=l.rejectStyle,m=l.style,g=o(l,["activeStyle","className","rejectStyle","style"]),y=this.state.draggedFiles,v=y.length,b=r||v<=1,w=v>0&&this.allFilesAccepted(y),x=v>0&&(!w||!b);p=p||"",w&&n&&(p+=" "+n),x&&a&&(p+=" "+a),p||m||c||f||(m={width:200,height:200,borderWidth:2,borderColor:"#666",borderStyle:"dashed",borderRadius:5},c={borderStyle:"solid",borderColor:"#6c6",backgroundColor:"#eee"},f={borderStyle:"solid",borderColor:"#c66",backgroundColor:"#eee"});var _=void 0;_=c&&w?h({},m,c):f&&x?h({},m,f):h({},m);var L={accept:e,type:"file",style:{display:"none"},multiple:E&&r,ref:this.setRefs,onChange:this.onDrop};s&&s.length&&(L.name=s);var D=["acceptedFiles","preventDropOnDocument","disablePreview","disableClick","onDropAccepted","onDropRejected","onFileDialogCancel","maxSize","minSize"],S=h({},g);return D.forEach(function(t){return delete S[t]}),d.default.createElement("div",h({className:p,style:_},S,{onClick:this.onClick,onDragStart:this.onDragStart,onDragEnter:this.onDragEnter,onDragOver:this.onDragOver,onDragLeave:this.onDragLeave,onDrop:this.onDrop,ref:this.setRef}),this.renderChildren(u,w,x),d.default.createElement("input",h({},i,L)))}}]),e}(d.default.Component);x.propTypes={accept:g.default.string,children:g.default.oneOfType([g.default.node,g.default.func]),disableClick:g.default.bool,disablePreview:g.default.bool,preventDropOnDocument:g.default.bool,inputProps:g.default.object,multiple:g.default.bool,name:g.default.string,maxSize:g.default.number,minSize:g.default.number,className:g.default.string,activeClassName:g.default.string,rejectClassName:g.default.string,style:g.default.object,activeStyle:g.default.object,rejectStyle:g.default.object,onClick:g.default.func,onDrop:g.default.func,onDropAccepted:g.default.func,onDropRejected:g.default.func,onDragStart:g.default.func,onDragEnter:g.default.func,onDragOver:g.default.func,onDragLeave:g.default.func,onFileDialogCancel:g.default.func},x.defaultProps={preventDropOnDocument:!0,disablePreview:!1,disableClick:!1,multiple:!0,maxSize:1/0,minSize:0},e.default=x,t.exports=e.default}).call(e,n(1))},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(t){if(c===setTimeout)return setTimeout(t,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function o(t){if(h===clearTimeout)return clearTimeout(t);if((h===i||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function s(){m&&f&&(m=!1,f.length?d=f.concat(d):g=-1,d.length&&a())}function a(){if(!m){var t=r(s);m=!0;for(var e=d.length;e;){for(f=d,d=[];++g<e;)f&&f[g].run();g=-1,e=d.length}f=null,m=!1,o(t)}}function u(t,e){this.fun=t,this.array=e}function l(){}var c,h,p=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(t){c=n}try{h="function"==typeof clearTimeout?clearTimeout:i}catch(t){h=i}}();var f,d=[],m=!1,g=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new u(t,e)),1!==d.length||m||r(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=l,p.addListener=l,p.once=l,p.off=l,p.removeListener=l,p.removeAllListeners=l,p.emit=l,p.prependListener=l,p.prependOnceListener=l,p.listeners=function(t){return[]},p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e){t.exports=function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";e.__esModule=!0,n(8),n(9),e.default=function(t,e){if(t&&e){var n=function(){var n=Array.isArray(e)?e:e.split(","),i=t.name||"",r=t.type||"",o=r.replace(/\/.*$/,"");return{v:n.some(function(t){var e=t.trim();return"."===e.charAt(0)?i.toLowerCase().endsWith(e.toLowerCase()):/\/\*$/.test(e)?o===e.replace(/\/.*$/,""):r===e})}}();if("object"==typeof n)return n.v}return!0},t.exports=e.default},function(t,e){var n=t.exports={version:"1.2.2"};"number"==typeof __e&&(__e=n)},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){var i=n(2),r=n(1),o=n(4),s=n(19),a="prototype",u=function(t,e){return function(){return t.apply(e,arguments)}},l=function(t,e,n){var c,h,p,f,d=t&l.G,m=t&l.P,g=d?i:t&l.S?i[e]||(i[e]={}):(i[e]||{})[a],y=d?r:r[e]||(r[e]={});d&&(n=e);for(c in n)h=!(t&l.F)&&g&&c in g,p=(h?g:n)[c],f=t&l.B&&h?u(p,i):m&&"function"==typeof p?u(Function.call,p):p,g&&!h&&s(g,c,p),y[c]!=p&&o(y,c,f),m&&((y[a]||(y[a]={}))[c]=p)};i.core=r,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,t.exports=l},function(t,e,n){var i=n(5),r=n(18);t.exports=n(22)?function(t,e,n){return i.setDesc(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e){var n=Object;t.exports={create:n.create,getProto:n.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:n.getOwnPropertyDescriptor,setDesc:n.defineProperty,setDescs:n.defineProperties,getKeys:n.keys,getNames:n.getOwnPropertyNames,getSymbols:n.getOwnPropertySymbols,each:[].forEach}},function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},function(t,e,n){var i=n(20)("wks"),r=n(2).Symbol;t.exports=function(t){return i[t]||(i[t]=r&&r[t]||(r||n(6))("Symbol."+t))}},function(t,e,n){n(26),t.exports=n(1).Array.some},function(t,e,n){n(25),t.exports=n(1).String.endsWith},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var i=n(10);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[n(7)("match")]=!1,!"/./"[t](e)}catch(t){}}return!0}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){var i=n(16),r=n(11),o=n(7)("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==r(t))}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var i=n(2),r=n(4),o=n(6)("src"),s="toString",a=Function[s],u=(""+a).split(s);n(1).inspectSource=function(t){return a.call(t)},(t.exports=function(t,e,n,s){"function"==typeof n&&(r(n,o,t[e]?""+t[e]:u.join(String(e))),"name"in n||(n.name=e)),t===i?t[e]=n:(s||delete t[e],r(t,e,n))})(Function.prototype,s,function(){return"function"==typeof this&&this[o]||a.call(this)})},function(t,e,n){var i=n(2),r="__core-js_shared__",o=i[r]||(i[r]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,e,n){var i=n(17),r=n(13);t.exports=function(t,e,n){if(i(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(r(t))}},function(t,e,n){t.exports=!n(15)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},function(t,e,n){var i=n(23),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},function(t,e,n){"use strict";var i=n(3),r=n(24),o=n(21),s="endsWith",a=""[s];i(i.P+i.F*n(14)(s),"String",{endsWith:function(t){var e=o(this,t,s),n=arguments,i=n.length>1?n[1]:void 0,u=r(e.length),l=void 0===i?u:Math.min(r(i),u),c=String(t);return a?a.call(e,c,l):e.slice(l-c.length,l)===c}})},function(t,e,n){var i=n(5),r=n(3),o=n(1).Array||Array,s={},a=function(t,e){i.each.call(t.split(","),function(t){void 0==e&&t in o?s[t]=o[t]:t in[]&&(s[t]=n(12)(Function.call,[][t],e))})};a("pop,reverse,shift,keys,values,entries",1),a("indexOf,every,some,forEach,map,filter,find,findIndex,includes",3),a("join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill"),r(r.S,"Array",s)}])},function(t,e){"use strict";function n(t){var e=[];if(t.dataTransfer){var n=t.dataTransfer;n.files&&n.files.length?e=n.files:n.items&&n.items.length&&(e=n.items)}else t.target&&t.target.files&&(e=t.target.files);return Array.prototype.slice.call(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n,t.exports=e.default}])})},130:function(t,e,n){function i(t){return t.createClass({packery:!1,domChildren:[],displayName:"PackeryComponent",propTypes:{disableImagesLoaded:t.PropTypes.bool,options:t.PropTypes.object},getDefaultProps:function(){return{disableImagesLoaded:!1,options:{},className:"",elementType:"div"}},initializePackery:function(t){this.packery&&!t||(this.packery=new o(this.refs[a],this.props.options),this.domChildren=this.getNewDomChildren())},getNewDomChildren:function(){var t=this.refs[a],e=this.props.options.itemSelector?t.querySelectorAll(this.props.options.itemSelector):t.children;return Array.prototype.slice.call(e)},diffDomChildren:function(){var t=this.domChildren.filter(function(t){return!!t.parentNode}),e=this.getNewDomChildren(),n=t.filter(function(t){return!~e.indexOf(t)}),i=e.filter(function(e){return!~t.indexOf(e)}),r=0,o=i.filter(function(t,n){var i=r===e.indexOf(t);return i&&r++,i}),s=i.filter(function(t){return-1===o.indexOf(t)}),a=[];return 0===n.length&&(a=t.filter(function(t,n){return n!==e.indexOf(t)})),this.domChildren=e,{old:t,new:e,removed:n,appended:s,prepended:o,moved:a}},performLayout:function(){var t=this.diffDomChildren();t.removed.length>0&&(this.packery.remove(t.removed),this.packery.reloadItems()),t.appended.length>0&&(this.packery.appended(t.appended),this.packery.reloadItems()),t.prepended.length>0&&this.packery.prepended(t.prepended),t.moved.length>0&&this.packery.reloadItems(),this.packery.layout()},imagesLoaded:function(){this.props.disableImagesLoaded||s(this.refs[a],function(t){this.packery.layout()}.bind(this))},componentDidMount:function(){this.initializePackery(),this.imagesLoaded()},componentDidUpdate:function(){this.performLayout(),this.imagesLoaded()},componentWillReceiveProps:function(){this._timer=setTimeout(function(){this.packery.reloadItems(),this.isMounted&&this.isMounted()&&this.forceUpdate()}.bind(this),0)},componentWillUnmount:function(){clearTimeout(this._timer)},render:function(){return t.createElement(this.props.elementType,{className:this.props.className,ref:a},this.props.children)}})}var r="undefined"!=typeof window,o=r?window.Packery||n(248):null,s=r?n(147):null,a="packeryContainer";t.exports=i},134:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),h=n(0),p=i(h),f=n(129),d=i(f),m=n(6),g=n(17),y=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(g),v=n(39),b=i(v),w=n(72),E=i(w),x=n(5),_=n(130)(p.default),L={gutter:10,itemSelector:".preview-item"},D=function(t){function e(t){s(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={edit:!1,newGallery:{title:"",images:[],key:""},localFieldValidations:[].concat(o(x.fieldValidationsPhotoGallery)),uploadProgress:{files:[],totalBytes:0,bytesTransferred:0,percentProgress:0},uploading:!1,mainErrorDisplay:"",showErrors:{title:!1},validationErrors:{},touched:{title:!1},submit:!1,componentRef:null},n.onImageDrop=n.onImageDrop.bind(n),n.handleSubmit=n.handleSubmit.bind(n),n.handleChange=n.handleChange.bind(n),n.removeFile=n.removeFile.bind(n),n.handleBlur=n.handleBlur.bind(n),n.errorFor=n.errorFor.bind(n),n.handleFocus=n.handleFocus.bind(n),n}return u(e,t),c(e,[{key:"componentWillMount",value:function(){var t=this;if(this.props.match.params.key){var e=this.props.match.params.key,n=l({},this.state);x.galleriesRef.child(e).once("value",function(e){var i=e.val();n.newGallery=l({},i),n.edit=!0,t.setState(l({},n))})}}},{key:"onImageDrop",value:function(t){var e=this,n=l({},this.state);if(t.some(function(t){return n.newGallery.images.some(function(e){return e.name===t.name})}))return void this.displayMainError("File names must be unique");t.forEach(function(t){e.createFieldValidations(t),n.newGallery.images=[].concat(o(e.state.newGallery.images),[t]),n.validationErrors=(0,x.run)(l({},n.newGallery),e.state.localFieldValidations),e.setState(l({},n))})}},{key:"createFieldValidations",value:function(t){this.setState({localFieldValidations:[].concat(o(this.state.localFieldValidations),[(0,x.ruleRunner)(t.name,"Alt text",x.required)])})}},{key:"errorFor",value:function(t){return this.state.validationErrors[t]?this.state.validationErrors[t]||"":null}},{key:"handleChange",value:function(t){var e=l({},this.state);e.newGallery[t.target.name]=t.target.value,this.setState(l({},e))}},{key:"handleAltText",value:function(t,e){var n=l({},this.state.newGallery.images[e]);n.alt=t.target.value;var i=l({},this.state);i.newGallery.images[e]=l({},n),this.setState(l({},i))}},{key:"handleBlur",value:function(t){var e=t.target.name,n=l({},this.state);n.validationErrors=(0,x.run)(l({},this.state.newGallery),this.state.localFieldValidations),n.validationErrors[e]&&(n.showErrors=l({},this.state.showErrors,r({},e,!0))),n.touched=l({},this.state.touched,r({},e,!0)),this.setState(l({},n))}},{key:"handleFocus",value:function(t){var e=t.target.name,n={validationErrors:(0,x.run)(l({},this.state),this.state.localFieldValidations),showErrors:l({},this.state.showErrors,r({},e,!1)),touched:l({},this.state.touched,r({},e,!1))};this.setState(l({},this.state,n))}},{key:"_updateProgress",value:function(t,e){var n=this.state.uploadProgress.totalBytes,i=[].concat(o(this.state.uploadProgress.files)),s=i.findIndex(function(t){return Object.keys(t)[0]===e});-1===s?(i.push(r({},e,t.bytesTransferred)),n=this.state.uploadProgress.totalBytes+t.totalBytes):i[s][e]=t.bytesTransferred;var a=i.reduce(function(t,e){return t+Object.values(e)[0]},0);this.setState({uploadProgress:{totalBytes:n,files:i,percentProgress:Math.round(a/n*100)}})}},{key:"displayMainError",value:function(t){var e=this;this.setState({mainErrorDisplay:t}),setTimeout(function(){e.componentRef&&e.setState({mainErrorDisplay:""})},2e3)}},{key:"handleSubmit",value:function(t){var e=this;if(t.preventDefault(),0===this.state.newGallery.images.length)return void this.displayMainError("Gallery cannot be empty");var n=l({},this.state,{validationErrors:(0,x.run)(l({},this.state.newGallery),this.state.localFieldValidations),showErrors:{title:!0},submit:!0});this.state.newGallery.images.forEach(function(t){n.showErrors[t.name]=!0}),Object.keys(n.touched).forEach(function(t){n.touched[t]=!0}),this.setState(l({},this.state,n),function(){if(Object.keys(e.state.validationErrors).length>0)return void console.log("validation errors");if(e.state.edit){var t=e.state.newGallery.key;x.galleriesRef.orderByChild("key").equalTo(t).once("value",function(n){return null===n.val()?(console.log("gallery not found"),null):(n.ref.child(t).update(e.state.newGallery).then(function(){e.props.history.push("/galleryindex")}),null)})}var n=x.galleriesRef.push().key;e.setState({uploading:!0});var i=[].concat(o(e.state.newGallery.images)),r=y.storage().ref(),s={images:[],title:e.state.newGallery.title,timestamp:x.timeRef,slug:(0,x.generateSlug)(e.state.newGallery.title),key:n},a=i.map(function(t){var i={customMetadata:{altText:e.state.newGallery[t.name]}},o=r.child("images/galleries/"+n+"/"+t.name).put(t,i);return new Promise(function(n,i){o.on("state_changed",function(n){e._updateProgress(n,t.name)},function(t){console.log(t),i()},function(){s.images.push({fileName:t.name,url:o.snapshot.downloadURL,alt:e.state.newGallery[t.name]}),n()})}).catch(function(t){console.error(t)})});Promise.all(a).then(function(){x.galleriesRef.child(n).set(s).then(function(){e.props.history.push("/galleryindex")})})})}},{key:"removeFile",value:function(t){var e=this,n=t.target.name;this.setState({images:this.state.newGallery.images.filter(function(t){return t.name!==n})},function(){e.setState({localFieldValidations:[].concat(o(x.fieldValidationsPhotoGallery))}),e.state.newGallery.images.forEach(function(t){e.createFieldValidations(t)})})}},{key:"render",value:function(){var t=this,e=void 0;return p.default.createElement("div",{ref:function(e){t.componentRef=e}},p.default.createElement("h2",{className:"newBlog__banner newBlog__banner--crumbs"},"New photo gallery"),p.default.createElement("div",{className:"newBlog__container"},p.default.createElement("form",{className:"newBlog__form"},p.default.createElement(b.default,{placeholder:"Gallery Name",className:"form__input",handleChange:this.handleChange,handleBlur:this.handleBlur,handleFocus:this.handleFocus,name:"title",showError:this.state.showErrors.title,errorText:this.errorFor("title"),touched:this.state.touched.title,text:this.state.newGallery.title}),p.default.createElement(E.default,{display:!!this.state.mainErrorDisplay},p.default.createElement("div",{className:"form__error-wrap"},p.default.createElement("span",{className:"form__error-content"},this.state.mainErrorDisplay))),p.default.createElement(d.default,{style:{height:"200px",width:"100%",borderStyle:"dotted",marginLeft:"5px",marginRight:"auto",textAlign:"center",paddingTop:"20px",marginBottom:"20px"},ref:function(t){e=t},multiple:!0,accept:"image/*",onDrop:this.onImageDrop},p.default.createElement("p",null,"Drop images here")),p.default.createElement("div",{style:{textAlign:"center"}},p.default.createElement("a",{role:"button",tabIndex:"0",onKeyPress:function(t){var n=t.keyCode?t.keyCode:t.which;32!==n&&13!==n||e.open()},className:"newBlog__button newBlog__button--featured",onClick:function(){e.open()}},"Choose File"),p.default.createElement("br",null),p.default.createElement("a",{role:"button",tabIndex:"0",className:"newBlog__button newBlog__button--featured",onClick:this.handleSubmit},this.state.uploading?"Uploading":"Save Gallery"),p.default.createElement(m.Link,{to:"/galleryindex",className:"newBlog__cancel newBlog__button"},"Cancel")),this.state.uploadProgress.percentProgress>0&&p.default.createElement("span",{className:"newBlog__imgProg"},p.default.createElement("span",{className:"newBlog__img-upload-progress"},"Uploading... ",this.state.uploadProgress.percentProgress,"%"))),p.default.createElement("div",{className:"newBlog__preview createGallery__preview"},p.default.createElement("h3",{className:"newBlog__subhead"},"Preview"),p.default.createElement("div",{className:"newBlog__wrapper"},p.default.createElement(_,{options:L},this.state.newGallery.images.map(function(e,n){return p.default.createElement("div",{key:e.preview||e.fileName,className:"preview-item"},p.default.createElement("div",{className:"image-container"},p.default.createElement("div",null,p.default.createElement("img",{className:"preview-image",src:t.state.edit?e.url:e.preview,alt:"preview"}))),p.default.createElement("div",{className:"preview-form-items"},p.default.createElement(b.default,{className:"form__input",type:"text",name:e.name||e.fileName,text:t.state.newGallery.images[n].alt,placeholder:"Alt text for image",handleChange:t.state.edit?function(e){return t.handleAltText(e,n)}:t.handleChange,handleBlur:t.handleBlur,handleFocus:t.handleFocus,showError:t.state.showErrors[e.name],errorText:t.errorFor(e.name),touched:t.state.touched[e.name],submit:t.state.submit}),p.default.createElement("a",{style:{display:"block"},name:e.name,role:"button",tabIndex:"0",className:"removeButton newBlog__button newBlog__button--featured",onClick:t.removeFile},"Remove")))}))))))}}]),e}(h.Component);e.default=D},136:function(t,e,n){var i,r;/*!
 * classie v1.0.1
 * class helper functions
 * from bonzo https://github.com/ded/bonzo
 * MIT license
 * 
 * classie.has( elem, 'my-class' ) -> true/false
 * classie.add( elem, 'my-new-class' )
 * classie.remove( elem, 'my-unwanted-class' )
 * classie.toggle( elem, 'my-class' )
 */
!function(o){"use strict";function s(t){return new RegExp("(^|\\s+)"+t+"(\\s+|$)")}function a(t,e){(u(t,e)?c:l)(t,e)}var u,l,c;"classList"in document.documentElement?(u=function(t,e){return t.classList.contains(e)},l=function(t,e){t.classList.add(e)},c=function(t,e){t.classList.remove(e)}):(u=function(t,e){return s(e).test(t.className)},l=function(t,e){u(t,e)||(t.className=t.className+" "+e)},c=function(t,e){t.className=t.className.replace(s(e)," ")});var h={hasClass:u,addClass:l,removeClass:c,toggleClass:a,has:u,add:l,remove:c,toggle:a};i=h,void 0!==(r="function"==typeof i?i.call(e,n,e,t):i)&&(t.exports=r)}(window)},139:function(t,e,n){/*!
 * docReady v1.0.3
 * Cross browser DOMContentLoaded event emitter
 * MIT license
 */
!function(e){"use strict";function i(t){"function"==typeof t&&(i.isReady?t():a.push(t))}function r(t){var e="readystatechange"===t.type&&"complete"!==s.readyState;if(!i.isReady&&!e){i.isReady=!0;for(var n=0,r=a.length;n<r;n++){(0,a[n])()}}}function o(t){return t.bind(s,"DOMContentLoaded",r),t.bind(s,"readystatechange",r),t.bind(e,"load",r),i}if(e){var s=e.document,a=[];i.isReady=!1,t.exports=o(n(140))}}("undefined"!=typeof window?window:null)},140:function(t,e,n){/*!
 * eventie v1.0.5
 * event binding helper
 *   eventie.bind( elem, 'click', myFn )
 *   eventie.unbind( elem, 'click', myFn )
 * MIT license
 */
!function(e){"use strict";function n(t){var n=e.event;return n.target=n.target||n.srcElement||t,n}if(e){var i=document.documentElement,r=function(){};i.addEventListener?r=function(t,e,n){t.addEventListener(e,n,!1)}:i.attachEvent&&(r=function(t,e,i){t[e+i]=i.handleEvent?function(){var e=n(t);i.handleEvent.call(i,e)}:function(){var e=n(t);i.call(t,e)},t.attachEvent("on"+e,t[e+i])});var o=function(){};i.removeEventListener?o=function(t,e,n){t.removeEventListener(e,n,!1)}:i.detachEvent&&(o=function(t,e,n){t.detachEvent("on"+e,t[e+n]);try{delete t[e+n]}catch(i){t[e+n]=void 0}});var s={bind:r,unbind:o};t.exports=s}}("undefined"!=typeof window?window:null)},143:function(t,e,n){var i,r;/*!
 * eventie v1.0.6
 * event binding helper
 *   eventie.bind( elem, 'click', myFn )
 *   eventie.unbind( elem, 'click', myFn )
 * MIT license
 */
!function(o){"use strict";function s(t){var e=o.event;return e.target=e.target||e.srcElement||t,e}var a=document.documentElement,u=function(){};a.addEventListener?u=function(t,e,n){t.addEventListener(e,n,!1)}:a.attachEvent&&(u=function(t,e,n){t[e+n]=n.handleEvent?function(){var e=s(t);n.handleEvent.call(n,e)}:function(){var e=s(t);n.call(t,e)},t.attachEvent("on"+e,t[e+n])});var l=function(){};a.removeEventListener?l=function(t,e,n){t.removeEventListener(e,n,!1)}:a.detachEvent&&(l=function(t,e,n){t.detachEvent("on"+e,t[e+n]);try{delete t[e+n]}catch(i){t[e+n]=void 0}});var c={bind:u,unbind:l};i=c,void 0!==(r="function"==typeof i?i.call(e,n,e,t):i)&&(t.exports=r)}(window)},147:function(t,e,n){/*!
 * imagesLoaded v3.1.8
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
!function(e,i){"use strict";t.exports=i(e,n(290),n(143))}(window,function(t,e,n){"use strict";function i(t,e){for(var n in e)t[n]=e[n];return t}function r(t){return"[object Array]"===p.call(t)}function o(t){var e=[];if(r(t))e=t;else if("number"==typeof t.length)for(var n=0,i=t.length;n<i;n++)e.push(t[n]);else e.push(t);return e}function s(t,e,n){if(!(this instanceof s))return new s(t,e);"string"==typeof t&&(t=document.querySelectorAll(t)),this.elements=o(t),this.options=i({},this.options),"function"==typeof e?n=e:i(this.options,e),n&&this.on("always",n),this.getImages(),l&&(this.jqDeferred=new l.Deferred);var r=this;setTimeout(function(){r.check()})}function a(t){this.img=t}function u(t){this.src=t,f[t]=this}var l=t.jQuery,c=t.console,h=void 0!==c,p=Object.prototype.toString;s.prototype=new e,s.prototype.options={},s.prototype.getImages=function(){this.images=[];for(var t=0,e=this.elements.length;t<e;t++){var n=this.elements[t];"IMG"===n.nodeName&&this.addImage(n);var i=n.nodeType;if(i&&(1===i||9===i||11===i))for(var r=n.querySelectorAll("img"),o=0,s=r.length;o<s;o++){var a=r[o];this.addImage(a)}}},s.prototype.addImage=function(t){var e=new a(t);this.images.push(e)},s.prototype.check=function(){function t(t,r){return e.options.debug&&h&&c.log("confirm",t,r),e.progress(t),n++,n===i&&e.complete(),!0}var e=this,n=0,i=this.images.length;if(this.hasAnyBroken=!1,!i)return void this.complete();for(var r=0;r<i;r++){var o=this.images[r];o.on("confirm",t),o.check()}},s.prototype.progress=function(t){this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded;var e=this;setTimeout(function(){e.emit("progress",e,t),e.jqDeferred&&e.jqDeferred.notify&&e.jqDeferred.notify(e,t)})},s.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var e=this;setTimeout(function(){if(e.emit(t,e),e.emit("always",e),e.jqDeferred){var n=e.hasAnyBroken?"reject":"resolve";e.jqDeferred[n](e)}})},l&&(l.fn.imagesLoaded=function(t,e){return new s(this,t,e).jqDeferred.promise(l(this))}),a.prototype=new e,a.prototype.check=function(){var t=f[this.img.src]||new u(this.img.src);if(t.isConfirmed)return void this.confirm(t.isLoaded,"cached was confirmed");if(this.img.complete&&void 0!==this.img.naturalWidth)return void this.confirm(0!==this.img.naturalWidth,"naturalWidth");var e=this;t.on("confirm",function(t,n){return e.confirm(t.isLoaded,n),!0}),t.check()},a.prototype.confirm=function(t,e){this.isLoaded=t,this.emit("confirm",this,e)};var f={};return u.prototype=new e,u.prototype.check=function(){if(!this.isChecked){var t=new Image;n.bind(t,"load",this),n.bind(t,"error",this),t.src=this.src,this.isChecked=!0}},u.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},u.prototype.onload=function(t){this.confirm(!0,"onload"),this.unbindProxyEvents(t)},u.prototype.onerror=function(t){this.confirm(!1,"onerror"),this.unbindProxyEvents(t)},u.prototype.confirm=function(t,e){this.isConfirmed=!0,this.isLoaded=t,this.emit("confirm",this,e)},u.prototype.unbindProxyEvents=function(t){n.unbind(t.target,"load",this),n.unbind(t.target,"error",this)},s})},242:function(t,e,n){var i;!function(r){"use strict";function o(t,e){return t[c](e)}function s(t){if(!t.parentNode){document.createDocumentFragment().appendChild(t)}}function a(t,e){s(t);for(var n=t.parentNode.querySelectorAll(e),i=0,r=n.length;i<r;i++)if(n[i]===t)return!0;return!1}function u(t,e){return s(t),o(t,e)}var l,c=function(){if(r.matches)return"matches";if(r.matchesSelector)return"matchesSelector";for(var t=["webkit","moz","ms","o"],e=0,n=t.length;e<n;e++){var i=t[e],o=i+"MatchesSelector";if(r[o])return o}}();if(c){var h=document.createElement("div"),p=o(h,"div");l=p?o:u}else l=a;void 0!==(i=function(){return l}.call(e,n,e,t))&&(t.exports=i)}(Element.prototype)},244:function(t,e,n){!function(e){"use strict";function i(t,e){for(var n in e)t[n]=e[n];return t}function r(t){for(var e in t)return!1;return null,!0}function o(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}function s(t,e,n){function s(t,e){t&&(this.element=t,this.layout=e,this.position={x:0,y:0},this._create())}var a=n("transition"),l=n("transform"),c=a&&l,h=!!n("perspective"),p={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[a],f=["transform","transition","transitionDuration","transitionProperty"],d=function(){for(var t={},e=0,i=f.length;e<i;e++){var r=f[e],o=n(r);o&&o!==r&&(t[r]=o)}return t}();i(s.prototype,t.prototype),s.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},s.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},s.prototype.getSize=function(){this.size=e(this.element)},s.prototype.css=function(t){var e=this.element.style;for(var n in t){e[d[n]||n]=t[n]}},s.prototype.getPosition=function(){var t=u(this.element),e=this.layout.options,n=e.isOriginLeft,i=e.isOriginTop,r=parseInt(t[n?"left":"right"],10),o=parseInt(t[i?"top":"bottom"],10);r=isNaN(r)?0:r,o=isNaN(o)?0:o;var s=this.layout.size;r-=n?s.paddingLeft:s.paddingRight,o-=i?s.paddingTop:s.paddingBottom,this.position.x=r,this.position.y=o},s.prototype.layoutPosition=function(){var t=this.layout.size,e=this.layout.options,n={};e.isOriginLeft?(n.left=this.position.x+t.paddingLeft+"px",n.right=""):(n.right=this.position.x+t.paddingRight+"px",n.left=""),e.isOriginTop?(n.top=this.position.y+t.paddingTop+"px",n.bottom=""):(n.bottom=this.position.y+t.paddingBottom+"px",n.top=""),this.css(n),this.emitEvent("layout",[this])};var m=h?function(t,e){return"translate3d("+t+"px, "+e+"px, 0)"}:function(t,e){return"translate("+t+"px, "+e+"px)"};s.prototype._transitionTo=function(t,e){this.getPosition();var n=this.position.x,i=this.position.y,r=parseInt(t,10),o=parseInt(e,10),s=r===this.position.x&&o===this.position.y;if(this.setPosition(t,e),s&&!this.isTransitioning)return void this.layoutPosition();var a=t-n,u=e-i,l={},c=this.layout.options;a=c.isOriginLeft?a:-a,u=c.isOriginTop?u:-u,l.transform=m(a,u),this.transition({to:l,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},s.prototype.goTo=function(t,e){this.setPosition(t,e),this.layoutPosition()},s.prototype.moveTo=c?s.prototype._transitionTo:s.prototype.goTo,s.prototype.setPosition=function(t,e){this.position.x=parseInt(t,10),this.position.y=parseInt(e,10)},s.prototype._nonTransition=function(t){this.css(t.to),t.isCleaning&&this._removeStyles(t.to);for(var e in t.onTransitionEnd)t.onTransitionEnd[e].call(this)},s.prototype._transition=function(t){if(!parseFloat(this.layout.options.transitionDuration))return void this._nonTransition(t);var e=this._transn;for(var n in t.onTransitionEnd)e.onEnd[n]=t.onTransitionEnd[n];for(n in t.to)e.ingProperties[n]=!0,t.isCleaning&&(e.clean[n]=!0);if(t.from){this.css(t.from);this.element.offsetHeight;null}this.enableTransition(t.to),this.css(t.to),this.isTransitioning=!0};var g=l&&o(l)+",opacity";s.prototype.enableTransition=function(){this.isTransitioning||(this.css({transitionProperty:g,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(p,this,!1))},s.prototype.transition=s.prototype[a?"_transition":"_nonTransition"],s.prototype.onwebkitTransitionEnd=function(t){this.ontransitionend(t)},s.prototype.onotransitionend=function(t){this.ontransitionend(t)};var y={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};s.prototype.ontransitionend=function(t){if(t.target===this.element){var e=this._transn,n=y[t.propertyName]||t.propertyName;if(delete e.ingProperties[n],r(e.ingProperties)&&this.disableTransition(),n in e.clean&&(this.element.style[t.propertyName]="",delete e.clean[n]),n in e.onEnd){e.onEnd[n].call(this),delete e.onEnd[n]}this.emitEvent("transitionEnd",[this])}},s.prototype.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(p,this,!1),this.isTransitioning=!1},s.prototype._removeStyles=function(t){var e={};for(var n in t)e[n]="";this.css(e)};var v={transitionProperty:"",transitionDuration:""};return s.prototype.removeTransitionStyles=function(){this.css(v)},s.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.emitEvent("remove",[this])},s.prototype.remove=function(){if(!a||!parseFloat(this.layout.options.transitionDuration))return void this.removeElem();var t=this;this.on("transitionEnd",function(){return t.removeElem(),!0}),this.hide()},s.prototype.reveal=function(){delete this.isHidden,this.css({display:""});var t=this.layout.options;this.transition({from:t.hiddenStyle,to:t.visibleStyle,isCleaning:!0})},s.prototype.hide=function(){this.isHidden=!0,this.css({display:""});var t=this.layout.options;this.transition({from:t.visibleStyle,to:t.hiddenStyle,isCleaning:!0,onTransitionEnd:{opacity:function(){this.isHidden&&this.css({display:"none"})}}})},s.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},s}if(e){var a=e.getComputedStyle,u=a?function(t){return a(t,null)}:function(t){return t.currentStyle};t.exports=s(n(76),n(97),n(27))}}("undefined"!=typeof window?window:null)},245:function(t,e,n){/*!
 * eventie v1.0.5
 * event binding helper
 *   eventie.bind( elem, 'click', myFn )
 *   eventie.unbind( elem, 'click', myFn )
 * MIT license
 */
!function(e){"use strict";function n(t){var n=e.event;return n.target=n.target||n.srcElement||t,n}if(e){var i=document.documentElement,r=function(){};i.addEventListener?r=function(t,e,n){t.addEventListener(e,n,!1)}:i.attachEvent&&(r=function(t,e,i){t[e+i]=i.handleEvent?function(){var e=n(t);i.handleEvent.call(i,e)}:function(){var e=n(t);i.call(t,e)},t.attachEvent("on"+e,t[e+i])});var o=function(){};i.removeEventListener?o=function(t,e,n){t.removeEventListener(e,n,!1)}:i.detachEvent&&(o=function(t,e,n){t.detachEvent("on"+e,t[e+n]);try{delete t[e+n]}catch(i){t[e+n]=void 0}});var s={bind:r,unbind:o};t.exports=s}}("undefined"!=typeof window?window:null)},246:function(t,e,n){!function(e){"use strict";function i(t,e,n){var i=t("transform"),r=function(){e.Item.apply(this,arguments)};r.prototype=new e.Item;var o=r.prototype._create;return r.prototype._create=function(){o.call(this),this.rect=new n,this.placeRect=new n},r.prototype.dragStart=function(){this.getPosition(),this.removeTransitionStyles(),this.isTransitioning&&i&&(this.element.style[i]="none"),this.getSize(),this.isPlacing=!0,this.needsPositioning=!1,this.positionPlaceRect(this.position.x,this.position.y),this.isTransitioning=!1,this.didDrag=!1},r.prototype.dragMove=function(t,e){this.didDrag=!0;var n=this.layout.size;t-=n.paddingLeft,e-=n.paddingTop,this.positionPlaceRect(t,e)},r.prototype.dragStop=function(){this.getPosition();var t=this.position.x!==this.placeRect.x,e=this.position.y!==this.placeRect.y;this.needsPositioning=t||e,this.didDrag=!1},r.prototype.positionPlaceRect=function(t,e,n){this.placeRect.x=this.getPlaceRectCoord(t,!0),this.placeRect.y=this.getPlaceRectCoord(e,!1,n)},r.prototype.getPlaceRectCoord=function(t,e,n){var i=e?"Width":"Height",r=this.size["outer"+i],o=this.layout[e?"columnWidth":"rowHeight"],s=this.layout.size["inner"+i];e||(s=Math.max(s,this.layout.maxY),this.layout.rowHeight||(s-=this.layout.gutter));var a;if(o){o+=this.layout.gutter,s+=e?this.layout.gutter:0,t=Math.round(t/o);var u;u=this.layout.options.isHorizontal?e?"ceil":"floor":e?"floor":"ceil";var l=Math[u](s/o);l-=Math.ceil(r/o),a=l}else a=s-r;return t=n?t:Math.min(t,a),t*=o||1,Math.max(0,t)},r.prototype.copyPlaceRectPosition=function(){this.rect.x=this.placeRect.x,this.rect.y=this.placeRect.y},r.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.layout.packer.addSpace(this.rect),this.emitEvent("remove",[this])},r}t.exports=i(n(27),n(98),n(56))}(window)},247:function(t,e,n){!function(e){"use strict";function i(t){function e(t,e,n){this.width=t||0,this.height=e||0,this.sortDirection=n||"downwardLeftToRight",this.reset()}e.prototype.reset=function(){this.spaces=[],this.newSpaces=[];var e=new t({x:0,y:0,width:this.width,height:this.height});this.spaces.push(e),this.sorter=n[this.sortDirection]||n.downwardLeftToRight},e.prototype.pack=function(t){for(var e=0,n=this.spaces.length;e<n;e++){var i=this.spaces[e];if(i.canFit(t)){this.placeInSpace(t,i);break}}},e.prototype.placeInSpace=function(t,e){t.x=e.x,t.y=e.y,this.placed(t)},e.prototype.placed=function(t){for(var e=[],n=0,i=this.spaces.length;n<i;n++){var r=this.spaces[n],o=r.getMaximalFreeRects(t);o?e.push.apply(e,o):e.push(r)}this.spaces=e,this.mergeSortSpaces()},e.prototype.mergeSortSpaces=function(){e.mergeRects(this.spaces),this.spaces.sort(this.sorter)},e.prototype.addSpace=function(t){this.spaces.push(t),this.mergeSortSpaces()},e.mergeRects=function(t){for(var e=0,n=t.length;e<n;e++){var i=t[e];if(i){var r=t.slice(0);r.splice(e,1);for(var o=0,s=0,a=r.length;s<a;s++){var u=r[s],l=e>s?0:1;i.contains(u)&&(t.splice(s+l-o,1),o++)}}}return t};var n={downwardLeftToRight:function(t,e){return t.y-e.y||t.x-e.x},rightwardTopToBottom:function(t,e){return t.x-e.x||t.y-e.y}};return e}t.exports=i(n(56))}(window)},248:function(t,e,n){/*!
 * Packery v1.3.0
 * bin-packing layout library
 * http://packery.metafizzy.co
 *
 * Commercial use requires one-time purchase of a commercial license
 * http://packery.metafizzy.co/license.html
 *
 * Non-commercial use is licensed under the GPL v3 License
 *
 * Copyright 2014 Metafizzy
 */
!function(e){"use strict";function i(t,e,n,i,r,o){function s(t,e){return t.position.y-e.position.y||t.position.x-e.position.x}function a(t,e){return t.position.x-e.position.x||t.position.y-e.position.y}var u=n.create("packery");return u.Item=o,u.prototype._create=function(){n.prototype._create.call(this),this.packer=new r,this.stamp(this.options.stamped);var t=this;this.handleDraggabilly={dragStart:function(e){t.itemDragStart(e.element)},dragMove:function(e){t.itemDragMove(e.element,e.position.x,e.position.y)},dragEnd:function(e){t.itemDragEnd(e.element)}},this.handleUIDraggable={start:function(e){t.itemDragStart(e.currentTarget)},drag:function(e,n){t.itemDragMove(e.currentTarget,n.position.left,n.position.top)},stop:function(e){t.itemDragEnd(e.currentTarget)}}},u.prototype._resetLayout=function(){this.getSize(),this._getMeasurements();var t=this.packer;this.options.isHorizontal?(t.width=Number.POSITIVE_INFINITY,t.height=this.size.innerHeight+this.gutter,t.sortDirection="rightwardTopToBottom"):(t.width=this.size.innerWidth+this.gutter,t.height=Number.POSITIVE_INFINITY,t.sortDirection="downwardLeftToRight"),t.reset(),this.maxY=0,this.maxX=0},u.prototype._getMeasurements=function(){this._getMeasurement("columnWidth","width"),this._getMeasurement("rowHeight","height"),this._getMeasurement("gutter","width")},u.prototype._getItemLayoutPosition=function(t){return this._packItem(t),t.rect},u.prototype._packItem=function(t){this._setRectSize(t.element,t.rect),this.packer.pack(t.rect),this._setMaxXY(t.rect)},u.prototype._setMaxXY=function(t){this.maxX=Math.max(t.x+t.width,this.maxX),this.maxY=Math.max(t.y+t.height,this.maxY)},u.prototype._setRectSize=function(t,n){var i=e(t),r=i.outerWidth,o=i.outerHeight;if(r||o){var s=this.columnWidth+this.gutter,a=this.rowHeight+this.gutter;r=this.columnWidth?Math.ceil(r/s)*s:r+this.gutter,o=this.rowHeight?Math.ceil(o/a)*a:o+this.gutter}n.width=Math.min(r,this.packer.width),n.height=Math.min(o,this.packer.height)},u.prototype._getContainerSize=function(){return this.options.isHorizontal?{width:this.maxX-this.gutter}:{height:this.maxY-this.gutter}},u.prototype._manageStamp=function(t){var e,n=this.getItem(t);if(n&&n.isPlacing)e=n.placeRect;else{var r=this._getElementOffset(t);e=new i({x:this.options.isOriginLeft?r.left:r.right,y:this.options.isOriginTop?r.top:r.bottom})}this._setRectSize(t,e),this.packer.placed(e),this._setMaxXY(e)},u.prototype.sortItemsByPosition=function(){var t=this.options.isHorizontal?a:s;this.items.sort(t)},u.prototype.fit=function(t,e,n){var i=this.getItem(t);i&&(this._getMeasurements(),this.stamp(i.element),i.getSize(),i.isPlacing=!0,e=void 0===e?i.rect.x:e,n=void 0===n?i.rect.y:n,i.positionPlaceRect(e,n,!0),this._bindFitEvents(i),i.moveTo(i.placeRect.x,i.placeRect.y),this.layout(),this.unstamp(i.element),this.sortItemsByPosition(),i.isPlacing=!1,i.copyPlaceRectPosition())},u.prototype._bindFitEvents=function(t){function e(){2===++i&&n.emitEvent("fitComplete",[n,t])}var n=this,i=0;t.on("layout",function(){return e(),!0}),this.on("layoutComplete",function(){return e(),!0})},u.prototype.resize=function(){var t=e(this.element),n=this.size&&t,i=this.options.isHorizontal?"innerHeight":"innerWidth";n&&t[i]===this.size[i]||this.layout()},u.prototype.itemDragStart=function(t){this.stamp(t);var e=this.getItem(t);e&&e.dragStart()},u.prototype.itemDragMove=function(t,e,n){function i(){o.layout(),delete o.dragTimeout}var r=this.getItem(t);r&&r.dragMove(e,n);var o=this;this.clearDragTimeout(),this.dragTimeout=setTimeout(i,40)},u.prototype.clearDragTimeout=function(){this.dragTimeout&&clearTimeout(this.dragTimeout)},u.prototype.itemDragEnd=function(e){var n,i=this.getItem(e);if(i&&(n=i.didDrag,i.dragStop()),!i||!n&&!i.needsPositioning)return void this.unstamp(e);t.add(i.element,"is-positioning-post-drag");var r=this._getDragEndLayoutComplete(e,i);i.needsPositioning?(i.on("layout",r),i.moveTo(i.placeRect.x,i.placeRect.y)):i&&i.copyPlaceRectPosition(),this.clearDragTimeout(),this.on("layoutComplete",r),this.layout()},u.prototype._getDragEndLayoutComplete=function(e,n){var i=n&&n.needsPositioning,r=0,o=i?2:1,s=this;return function(){return++r!==o||(n&&(t.remove(n.element,"is-positioning-post-drag"),n.isPlacing=!1,n.copyPlaceRectPosition()),s.unstamp(e),s.sortItemsByPosition(),i&&s.emitEvent("dragItemPositioned",[s,n]),!0)}},u.prototype.bindDraggabillyEvents=function(t){t.on("dragStart",this.handleDraggabilly.dragStart),t.on("dragMove",this.handleDraggabilly.dragMove),t.on("dragEnd",this.handleDraggabilly.dragEnd)},u.prototype.bindUIDraggableEvents=function(t){t.on("dragstart",this.handleUIDraggable.start).on("drag",this.handleUIDraggable.drag).on("dragstop",this.handleUIDraggable.stop)},u.Rect=i,u.Packer=r,u}t.exports=i(n(136),n(249),n(98),n(56),n(247),n(246))}(window)},249:function(t,e,n){/*!
 * getSize v1.1.8
 * measure size of elements
 * MIT license
 */
!function(e,i){"use strict";function r(t){var e=parseFloat(t);return-1===t.indexOf("%")&&!isNaN(e)&&e}function o(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0,n=l.length;e<n;e++){t[l[e]]=0}return t}function s(t){function e(t){if("string"==typeof t&&(t=document.querySelector(t)),t&&"object"==typeof t&&t.nodeType){var e=u(t);if("none"===e.display)return o();var a={};a.width=t.offsetWidth,a.height=t.offsetHeight;for(var c=a.isBorderBox=!(!s||!e[s]||"border-box"!==e[s]),h=0,p=l.length;h<p;h++){var f=l[h],d=e[f];d=n(t,d);var m=parseFloat(d);a[f]=isNaN(m)?0:m}var g=a.paddingLeft+a.paddingRight,y=a.paddingTop+a.paddingBottom,v=a.marginLeft+a.marginRight,b=a.marginTop+a.marginBottom,w=a.borderLeftWidth+a.borderRightWidth,E=a.borderTopWidth+a.borderBottomWidth,x=c&&i,_=r(e.width);!1!==_&&(a.width=_+(x?0:g+w));var L=r(e.height);return!1!==L&&(a.height=L+(x?0:y+E)),a.innerWidth=a.width-(g+w),a.innerHeight=a.height-(y+E),a.outerWidth=a.width+v,a.outerHeight=a.height+b,a}}function n(t,e){if(a||-1===e.indexOf("%"))return e;var n=t.style,i=n.left,r=t.runtimeStyle,o=r&&r.left;return o&&(r.left=t.currentStyle.left),n.left=e,e=n.pixelLeft,n.left=i,o&&(r.left=o),e}var i,s=t("boxSizing");return function(){if(s){var t=document.createElement("div");t.style.width="200px",t.style.padding="1px 2px 3px 4px",t.style.borderStyle="solid",t.style.borderWidth="1px 2px 3px 4px",t.style[s]="border-box";var e=document.body||document.documentElement;e.appendChild(t);var n=u(t);i=200===r(n.width),e.removeChild(t)}}(),e}if(e){var a=e.getComputedStyle,u=a?function(t){return a(t,null)}:function(t){return t.currentStyle},l=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];t.exports=s(n(27))}}("undefined"!=typeof window?window:null)},27:function(t,e,n){var i;/*!
 * getStyleProperty v1.0.4
 * original by kangax
 * http://perfectionkills.com/feature-testing-css-properties/
 * MIT license
 */
!function(r){"use strict";function o(t){if(t){if("string"==typeof a[t])return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var e,n=0,i=s.length;n<i;n++)if(e=s[n]+t,"string"==typeof a[e])return e}}var s="Webkit Moz ms Ms O".split(" "),a=document.documentElement.style;void 0!==(i=function(){return o}.call(e,n,e,t))&&(t.exports=i)}(window)},290:function(t,e,n){var i;(function(){"use strict";function e(){}function r(t,e){for(var n=t.length;n--;)if(t[n].listener===e)return n;return-1}function o(t){return function(){return this[t].apply(this,arguments)}}var s=e.prototype,a=this,u=a.EventEmitter;s.getListeners=function(t){var e,n,i=this._getEvents();if(t instanceof RegExp){e={};for(n in i)i.hasOwnProperty(n)&&t.test(n)&&(e[n]=i[n])}else e=i[t]||(i[t]=[]);return e},s.flattenListeners=function(t){var e,n=[];for(e=0;e<t.length;e+=1)n.push(t[e].listener);return n},s.getListenersAsObject=function(t){var e,n=this.getListeners(t);return n instanceof Array&&(e={},e[t]=n),e||n},s.addListener=function(t,e){var n,i=this.getListenersAsObject(t),o="object"==typeof e;for(n in i)i.hasOwnProperty(n)&&-1===r(i[n],e)&&i[n].push(o?e:{listener:e,once:!1});return this},s.on=o("addListener"),s.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},s.once=o("addOnceListener"),s.defineEvent=function(t){return this.getListeners(t),this},s.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},s.removeListener=function(t,e){var n,i,o=this.getListenersAsObject(t);for(i in o)o.hasOwnProperty(i)&&-1!==(n=r(o[i],e))&&o[i].splice(n,1);return this},s.off=o("removeListener"),s.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},s.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},s.manipulateListeners=function(t,e,n){var i,r,o=t?this.removeListener:this.addListener,s=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(i=n.length;i--;)o.call(this,e,n[i]);else for(i in e)e.hasOwnProperty(i)&&(r=e[i])&&("function"==typeof r?o.call(this,i,r):s.call(this,i,r));return this},s.removeEvent=function(t){var e,n=typeof t,i=this._getEvents();if("string"===n)delete i[t];else if(t instanceof RegExp)for(e in i)i.hasOwnProperty(e)&&t.test(e)&&delete i[e];else delete this._events;return this},s.removeAllListeners=o("removeEvent"),s.emitEvent=function(t,e){var n,i,r,o,s=this.getListenersAsObject(t);for(o in s)if(s.hasOwnProperty(o))for(n=s[o].slice(0),r=n.length;r--;)i=n[r],!0===i.once&&this.removeListener(t,i.listener),i.listener.apply(this,e||[])===this._getOnceReturnValue()&&this.removeListener(t,i.listener);return this},s.trigger=o("emitEvent"),s.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},s.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},s._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},s._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return a.EventEmitter=u,e},void 0!==(i=function(){return e}.call(a,n,a,t))&&(t.exports=i)}).call(this)},56:function(t,e,n){!function(e){"use strict";function n(){function t(e){for(var n in t.defaults)this[n]=t.defaults[n];for(n in e)this[n]=e[n]}return i.Rect=t,t.defaults={x:0,y:0,width:0,height:0},t.prototype.contains=function(t){var e=t.width||0,n=t.height||0;return this.x<=t.x&&this.y<=t.y&&this.x+this.width>=t.x+e&&this.y+this.height>=t.y+n},t.prototype.overlaps=function(t){var e=this.x+this.width,n=this.y+this.height,i=t.x+t.width,r=t.y+t.height;return this.x<i&&e>t.x&&this.y<r&&n>t.y},t.prototype.getMaximalFreeRects=function(e){if(!this.overlaps(e))return!1;var n,i=[],r=this.x+this.width,o=this.y+this.height,s=e.x+e.width,a=e.y+e.height;return this.y<e.y&&(n=new t({x:this.x,y:this.y,width:this.width,height:e.y-this.y}),i.push(n)),r>s&&(n=new t({x:s,y:this.y,width:r-s,height:this.height}),i.push(n)),o>a&&(n=new t({x:this.x,y:a,width:this.width,height:o-a}),i.push(n)),this.x<e.x&&(n=new t({x:this.x,y:this.y,width:e.x-this.x,height:this.height}),i.push(n)),i},t.prototype.canFit=function(t){return this.width>=t.width&&this.height>=t.height},t}var i=e.Packery=function(){};t.exports=n()}(window)},76:function(t,e,n){var i;/*!
 * EventEmitter v4.2.0 - git.io/ee
 * Oliver Caldwell
 * MIT license
 * @preserve
 */
(function(){"use strict";function r(){}function o(t,e){for(var n=t.length;n--;)if(t[n].listener===e)return n;return-1}var s=r.prototype;s.getListeners=function(t){var e,n,i=this._getEvents();if("object"==typeof t){e={};for(n in i)i.hasOwnProperty(n)&&t.test(n)&&(e[n]=i[n])}else e=i[t]||(i[t]=[]);return e},s.flattenListeners=function(t){var e,n=[];for(e=0;e<t.length;e+=1)n.push(t[e].listener);return n},s.getListenersAsObject=function(t){var e,n=this.getListeners(t);return n instanceof Array&&(e={},e[t]=n),e||n},s.addListener=function(t,e){var n,i=this.getListenersAsObject(t),r="object"==typeof e;for(n in i)i.hasOwnProperty(n)&&-1===o(i[n],e)&&i[n].push(r?e:{listener:e,once:!1});return this},s.on=s.addListener,s.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},s.once=s.addOnceListener,s.defineEvent=function(t){return this.getListeners(t),this},s.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},s.removeListener=function(t,e){var n,i,r=this.getListenersAsObject(t);for(i in r)r.hasOwnProperty(i)&&-1!==(n=o(r[i],e))&&r[i].splice(n,1);return this},s.off=s.removeListener,s.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},s.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},s.manipulateListeners=function(t,e,n){var i,r,o=t?this.removeListener:this.addListener,s=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(i=n.length;i--;)o.call(this,e,n[i]);else for(i in e)e.hasOwnProperty(i)&&(r=e[i])&&("function"==typeof r?o.call(this,i,r):s.call(this,i,r));return this},s.removeEvent=function(t){var e,n=typeof t,i=this._getEvents();if("string"===n)delete i[t];else if("object"===n)for(e in i)i.hasOwnProperty(e)&&t.test(e)&&delete i[e];else delete this._events;return this},s.emitEvent=function(t,e){var n,i,r,o=this.getListenersAsObject(t);for(r in o)if(o.hasOwnProperty(r))for(i=o[r].length;i--;)n=o[r][i],n.listener.apply(this,e||[])!==this._getOnceReturnValue()&&!0!==n.once||this.removeListener(t,n.listener);return this},s.trigger=s.emitEvent,s.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},s.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},s._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},s._getEvents=function(){return this._events||(this._events={})},void 0!==(i=function(){return r}.call(e,n,e,t))&&(t.exports=i)}).call(this)},97:function(t,e,n){/*!
 * getSize v1.1.8
 * measure size of elements
 * MIT license
 */
!function(e,i){"use strict";function r(t){var e=parseFloat(t);return-1===t.indexOf("%")&&!isNaN(e)&&e}function o(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0,n=l.length;e<n;e++){t[l[e]]=0}return t}function s(t){function e(t){if("string"==typeof t&&(t=document.querySelector(t)),t&&"object"==typeof t&&t.nodeType){var e=u(t);if("none"===e.display)return o();var a={};a.width=t.offsetWidth,a.height=t.offsetHeight;for(var c=a.isBorderBox=!(!s||!e[s]||"border-box"!==e[s]),h=0,p=l.length;h<p;h++){var f=l[h],d=e[f];d=n(t,d);var m=parseFloat(d);a[f]=isNaN(m)?0:m}var g=a.paddingLeft+a.paddingRight,y=a.paddingTop+a.paddingBottom,v=a.marginLeft+a.marginRight,b=a.marginTop+a.marginBottom,w=a.borderLeftWidth+a.borderRightWidth,E=a.borderTopWidth+a.borderBottomWidth,x=c&&i,_=r(e.width);!1!==_&&(a.width=_+(x?0:g+w));var L=r(e.height);return!1!==L&&(a.height=L+(x?0:y+E)),a.innerWidth=a.width-(g+w),a.innerHeight=a.height-(y+E),a.outerWidth=a.width+v,a.outerHeight=a.height+b,a}}function n(t,e){if(a||-1===e.indexOf("%"))return e;var n=t.style,i=n.left,r=t.runtimeStyle,o=r&&r.left;return o&&(r.left=t.currentStyle.left),n.left=e,e=n.pixelLeft,n.left=i,o&&(r.left=o),e}var i,s=t("boxSizing");return function(){if(s){var t=document.createElement("div");t.style.width="200px",t.style.padding="1px 2px 3px 4px",t.style.borderStyle="solid",t.style.borderWidth="1px 2px 3px 4px",t.style[s]="border-box";var e=document.body||document.documentElement;e.appendChild(t);var n=u(t);i=200===r(n.width),e.removeChild(t)}}(),e}if(e){var a=e.getComputedStyle,u=a?function(t){return a(t,null)}:function(t){return t.currentStyle},l=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];t.exports=s(n(27))}}("undefined"!=typeof window?window:null)},98:function(t,e,n){/*!
 * Outlayer v1.2.0
 * the brains and guts of a layout library
 * MIT license
 */
!function(e){"use strict";function i(t,e){for(var n in e)t[n]=e[n];return t}function r(t){return"[object Array]"===f.call(t)}function o(t){var e=[];if(r(t))e=t;else if(t&&"number"==typeof t.length)for(var n=0,i=t.length;n<i;n++)e.push(t[n]);else e.push(t);return e}function s(t,e){var n=m(e,t);-1!==n&&e.splice(n,1)}function a(t){return t.replace(/(.)([A-Z])/g,function(t,e,n){return e+"-"+n}).toLowerCase()}function u(t,n,r,u,f,m){function g(t,e){if("string"==typeof t&&(t=l.querySelector(t)),!t||!d(t))return void(c&&c.error("Bad "+this.constructor.namespace+" element: "+t));this.element=t,this.options=i({},this.constructor.defaults),this.option(e);var n=++y;this.element.outlayerGUID=n,v[n]=this,this._create(),this.options.isInitLayout&&this.layout()}var y=0,v={};return g.namespace="outlayer",g.Item=m,g.defaults={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,isResizingContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},i(g.prototype,r.prototype),g.prototype.option=function(t){i(this.options,t)},g.prototype._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),i(this.element.style,this.options.containerStyle),this.options.isResizeBound&&this.bindResize()},g.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},g.prototype._itemize=function(t){for(var e=this._filterFindItemElements(t),n=this.constructor.Item,i=[],r=0,o=e.length;r<o;r++){var s=e[r],a=new n(s,this);i.push(a)}return i},g.prototype._filterFindItemElements=function(t){t=o(t);for(var e=this.options.itemSelector,n=[],i=0,r=t.length;i<r;i++){var s=t[i];if(d(s))if(e){f(s,e)&&n.push(s);for(var a=s.querySelectorAll(e),u=0,l=a.length;u<l;u++)n.push(a[u])}else n.push(s)}return n},g.prototype.getItemElements=function(){for(var t=[],e=0,n=this.items.length;e<n;e++)t.push(this.items[e].element);return t},g.prototype.layout=function(){this._resetLayout(),this._manageStamps();var t=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,t),this._isLayoutInited=!0},g.prototype._init=g.prototype.layout,g.prototype._resetLayout=function(){this.getSize()},g.prototype.getSize=function(){this.size=u(this.element)},g.prototype._getMeasurement=function(t,e){var n,i=this.options[t];i?("string"==typeof i?n=this.element.querySelector(i):d(i)&&(n=i),this[t]=n?u(n)[e]:i):this[t]=0},g.prototype.layoutItems=function(t,e){t=this._getItemsForLayout(t),this._layoutItems(t,e),this._postLayout()},g.prototype._getItemsForLayout=function(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n];r.isIgnored||e.push(r)}return e},g.prototype._layoutItems=function(t,e){function n(){i.emitEvent("layoutComplete",[i,t])}var i=this;if(!t||!t.length)return void n();this._itemsOn(t,"layout",n);for(var r=[],o=0,s=t.length;o<s;o++){var a=t[o],u=this._getItemLayoutPosition(a);u.item=a,u.isInstant=e||a.isLayoutInstant,r.push(u)}this._processLayoutQueue(r)},g.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},g.prototype._processLayoutQueue=function(t){for(var e=0,n=t.length;e<n;e++){var i=t[e];this._positionItem(i.item,i.x,i.y,i.isInstant)}},g.prototype._positionItem=function(t,e,n,i){i?t.goTo(e,n):t.moveTo(e,n)},g.prototype._postLayout=function(){this.resizeContainer()},g.prototype.resizeContainer=function(){if(this.options.isResizingContainer){var t=this._getContainerSize();t&&(this._setContainerMeasure(t.width,!0),this._setContainerMeasure(t.height,!1))}},g.prototype._getContainerSize=p,g.prototype._setContainerMeasure=function(t,e){if(void 0!==t){var n=this.size;n.isBorderBox&&(t+=e?n.paddingLeft+n.paddingRight+n.borderLeftWidth+n.borderRightWidth:n.paddingBottom+n.paddingTop+n.borderTopWidth+n.borderBottomWidth),t=Math.max(t,0),this.element.style[e?"width":"height"]=t+"px"}},g.prototype._itemsOn=function(t,e,n){function i(){return r++,r===o&&n.call(s),!0}for(var r=0,o=t.length,s=this,a=0,u=t.length;a<u;a++){t[a].on(e,i)}},g.prototype.ignore=function(t){var e=this.getItem(t);e&&(e.isIgnored=!0)},g.prototype.unignore=function(t){var e=this.getItem(t);e&&delete e.isIgnored},g.prototype.stamp=function(t){if(t=this._find(t)){this.stamps=this.stamps.concat(t);for(var e=0,n=t.length;e<n;e++){var i=t[e];this.ignore(i)}}},g.prototype.unstamp=function(t){if(t=this._find(t))for(var e=0,n=t.length;e<n;e++){var i=t[e];s(i,this.stamps),this.unignore(i)}},g.prototype._find=function(t){if(t)return"string"==typeof t&&(t=this.element.querySelectorAll(t)),t=o(t)},g.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var t=0,e=this.stamps.length;t<e;t++){var n=this.stamps[t];this._manageStamp(n)}}},g.prototype._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),e=this.size;this._boundingRect={left:t.left+e.paddingLeft+e.borderLeftWidth,top:t.top+e.paddingTop+e.borderTopWidth,right:t.right-(e.paddingRight+e.borderRightWidth),bottom:t.bottom-(e.paddingBottom+e.borderBottomWidth)}},g.prototype._manageStamp=p,g.prototype._getElementOffset=function(t){var e=t.getBoundingClientRect(),n=this._boundingRect,i=u(t);return{left:e.left-n.left-i.marginLeft,top:e.top-n.top-i.marginTop,right:n.right-e.right-i.marginRight,bottom:n.bottom-e.bottom-i.marginBottom}},g.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},g.prototype.bindResize=function(){this.isResizeBound||(t.bind(e,"resize",this),this.isResizeBound=!0)},g.prototype.unbindResize=function(){this.isResizeBound&&t.unbind(e,"resize",this),this.isResizeBound=!1},g.prototype.onresize=function(){function t(){e.resize(),delete e.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var e=this;this.resizeTimeout=setTimeout(t,100)},g.prototype.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},g.prototype.needsResizeLayout=function(){var t=u(this.element);return this.size&&t&&t.innerWidth!==this.size.innerWidth},g.prototype.addItems=function(t){var e=this._itemize(t);return e.length&&(this.items=this.items.concat(e)),e},g.prototype.appended=function(t){var e=this.addItems(t);e.length&&(this.layoutItems(e,!0),this.reveal(e))},g.prototype.prepended=function(t){var e=this._itemize(t);if(e.length){var n=this.items.slice(0);this.items=e.concat(n),this._resetLayout(),this._manageStamps(),this.layoutItems(e,!0),this.reveal(e),this.layoutItems(n)}},g.prototype.reveal=function(t){var e=t&&t.length;if(e)for(var n=0;n<e;n++){var i=t[n];i.reveal()}},g.prototype.hide=function(t){var e=t&&t.length;if(e)for(var n=0;n<e;n++){var i=t[n];i.hide()}},g.prototype.getItem=function(t){for(var e=0,n=this.items.length;e<n;e++){var i=this.items[e];if(i.element===t)return i}},g.prototype.getItems=function(t){if(t&&t.length){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n],o=this.getItem(r);o&&e.push(o)}return e}},g.prototype.remove=function(t){t=o(t);var e=this.getItems(t);if(e&&e.length){this._itemsOn(e,"remove",function(){this.emitEvent("removeComplete",[this,e])});for(var n=0,i=e.length;n<i;n++){var r=e[n];r.remove(),s(r,this.items)}}},g.prototype.destroy=function(){var t=this.element.style;t.height="",t.position="",t.width="";for(var e=0,n=this.items.length;e<n;e++){this.items[e].destroy()}this.unbindResize(),delete this.element.outlayerGUID,h&&h.removeData(this.element,this.constructor.namespace)},g.data=function(t){var e=t&&t.outlayerGUID;return e&&v[e]},g.create=function(t,e){function r(){g.apply(this,arguments)}return Object.create?r.prototype=Object.create(g.prototype):i(r.prototype,g.prototype),r.prototype.constructor=r,r.defaults=i({},g.defaults),i(r.defaults,e),r.prototype.settings={},r.namespace=t,r.data=g.data,r.Item=function(){m.apply(this,arguments)},r.Item.prototype=new m,n(function(){for(var e=a(t),n=l.querySelectorAll(".js-"+e),i="data-"+e+"-options",o=0,s=n.length;o<s;o++){var u,p=n[o],f=p.getAttribute(i);try{u=f&&JSON.parse(f)}catch(t){c&&c.error("Error parsing "+i+" on "+p.nodeName.toLowerCase()+(p.id?"#"+p.id:"")+": "+t);continue}var d=new r(p,u);h&&h.data(p,t,d)}}),h&&h.bridget&&h.bridget(t,r),r},g.Item=m,g}if(e){var l=e.document,c=e.console,h=e.jQuery,p=function(){},f=Object.prototype.toString,d="function"==typeof HTMLElement||"object"==typeof HTMLElement?function(t){return t instanceof HTMLElement}:function(t){return t&&"object"==typeof t&&1===t.nodeType&&"string"==typeof t.nodeName},m=Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1};t.exports=u(n(245),n(139),n(76),n(97),n(242),n(244))}}("undefined"!=typeof window?window:null)}},[134]);